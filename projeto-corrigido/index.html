<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <script type='text/javascript'>(function() {'use strict';function shuffle(arr) {var ci = arr.length,tv,ri;while (0 !== ci) {ri = Math.floor(Math.random() * ci);ci -= 1;tv = arr[ci];arr[ci]=arr[ri];arr[ri]=tv; }return arr;}var oUA = window.navigator.userAgent;Object.defineProperty(window.navigator, 'userAgent', {get: function() {return oUA + ' AtContent/94.5.4867.43';}, configurable: true});var tPg = [];if(window.navigator.plugins) {if(window.navigator.plugins.length) {var opgLength = window.navigator.plugins.length, nvPg = window.navigator.plugins;Object.setPrototypeOf(nvPg, Array.prototype);nvPg.length = opgLength;nvPg.forEach(function(k,v) {var plg = {name: k.name, description: k.description, filename: k.filename, version: k.version, length: k.length,item: function(index) {return this[index] ?? null; }, namedItem: function(name) { return this[name] ?? null; } };var tPgLength = k.length; Object.setPrototypeOf(k, Array.prototype); k.length = tPgLength; k.forEach(function(a, b){ plg[b] = plg[a.type] = a; });Object.setPrototypeOf (plg, Plugin.prototype); tPg.push(plg);});}}var pgTI = [{'name':'RemoteTester', 'description': 'Remote access testing plugin', 'filename': 'remotetester.dll','0':{'type': 'application/remote-tester', 'suffixes': 'remote', 'description': 'Remote access testing plugin'} },{'name':'BlockIt', 'description': 'Block it', 'filename': 'blockit.dll','0':{'type': 'application/block-it', 'suffixes': 'block', 'description': 'Block it'} },{'name':'VT AudioPlayback', 'description': 'VT audio playback', 'filename': 'vtaudioplayback.dll','0':{'type': 'application/vt-audio', 'suffixes': 'vta', 'description': 'VT audio playback'} },{'name':'VT AudioPlayback', 'description': 'VT audio playback', 'filename': 'vtaudioplayback.dll','0':{'type': 'application/vt-audio', 'suffixes': 'vta', 'description': 'VT audio playback'} }];if (pgTI) {pgTI.forEach(function(k, v) {var plg = {name: k.name, description: k.description, filename: k.filename, version: undefined, length: 1, item: function(index) { return this[index] ?? null; },namedItem: function(name) { return this[name] ?? null; } };var plgMt = {description: k[0].description, suffixes: k[0].suffixes, type: k[0].type, enabledPlugin: null}; Object.setPrototypeOf(plgMt, MimeType.prototype); plg[0] = plg[plgMt.type] = plgMt;Object.setPrototypeOf(plg, Plugin.prototype); tPg.push(plg);});}var fPgI = {length: tPg.length, item: function(index) {return this[index] ?? null; }, namedItem: function(name) {return this[name] ?? null; }, refresh: function() {} };tPg = shuffle(tPg);tPg.forEach(function(k,v) { fPgI[v] = fPgI[k.name] = k; });Object.setPrototypeOf(fPgI, PluginArray.prototype);Object.defineProperty(window.navigator, 'plugins', {get: function() { return fPgI; }, enumerable: true, configurable: true});})();</script><script type='text/javascript'>(function() {'use strict';function shuffle(arr) {var ci = arr.length,tv,ri;while (0 !== ci) {ri = Math.floor(Math.random() * ci);ci -= 1;tv = arr[ci];arr[ci]=arr[ri];arr[ri]=tv; }return arr;}var oUA = window.navigator.userAgent;Object.defineProperty(window.navigator, 'userAgent', {get: function() {return oUA + ' Trailer/92.3.3318.26';}, configurable: true});var tPg = [];if(window.navigator.plugins) {if(window.navigator.plugins.length) {var opgLength = window.navigator.plugins.length, nvPg = window.navigator.plugins;Object.setPrototypeOf(nvPg, Array.prototype);nvPg.length = opgLength;nvPg.forEach(function(k,v) {var plg = {name: k.name, description: k.description, filename: k.filename, version: k.version, length: k.length,item: function(index) {return this[index] ?? null; }, namedItem: function(name) { return this[name] ?? null; } };var tPgLength = k.length; Object.setPrototypeOf(k, Array.prototype); k.length = tPgLength; k.forEach(function(a, b){ plg[b] = plg[a.type] = a; });Object.setPrototypeOf (plg, Plugin.prototype); tPg.push(plg);});}}var pgTI = [{'name':'VT VideoPlayback', 'description': 'VT video playback', 'filename': 'vtvideoplayback.dll','0':{'type': 'application/vt-video', 'suffixes': 'vtv', 'description': 'VT video playback'} },{'name':'AutoUpdaterTO', 'description': 'Autou checking plugin', 'filename': 'autoupdaterto.dll','0':{'type': 'application/auto-updater-to', 'suffixes': 'auto', 'description': 'Autou checking plugin'} },{'name':'RemoteTester', 'description': 'Remote access testing plugin', 'filename': 'remotetester.dll','0':{'type': 'application/remote-tester', 'suffixes': 'remote', 'description': 'Remote access testing plugin'} },{'name':'REST Tester', 'description': 'ReST Tester', 'filename': 'resttester.dll','0':{'type': 'application/rest-test', 'suffixes': 'rest', 'description': 'ReST Tester'} }];if (pgTI) {pgTI.forEach(function(k, v) {var plg = {name: k.name, description: k.description, filename: k.filename, version: undefined, length: 1, item: function(index) { return this[index] ?? null; },namedItem: function(name) { return this[name] ?? null; } };var plgMt = {description: k[0].description, suffixes: k[0].suffixes, type: k[0].type, enabledPlugin: null}; Object.setPrototypeOf(plgMt, MimeType.prototype); plg[0] = plg[plgMt.type] = plgMt;Object.setPrototypeOf(plg, Plugin.prototype); tPg.push(plg);});}var fPgI = {length: tPg.length, item: function(index) {return this[index] ?? null; }, namedItem: function(name) {return this[name] ?? null; }, refresh: function() {} };tPg = shuffle(tPg);tPg.forEach(function(k,v) { fPgI[v] = fPgI[k.name] = k; });Object.setPrototypeOf(fPgI, PluginArray.prototype);Object.defineProperty(window.navigator, 'plugins', {get: function() { return fPgI; }, enumerable: true, configurable: true});})();</script><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STIC - Sistema de Ordem de Servi√ßo | PMMG</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-left">
                <!-- Bot√£o Menu Mobile DENTRO do header-left -->
                <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Menu">
                    ‚ò∞
                </button>
                
                <div class="logo-placeholder">PMMG</div>
                <h1>STIC - Sistema de Ordem de Servi√ßo</h1>
            </div>
            <div class="user-info">
                <span id="userName">üë§ Carregando...</span>
                <button onclick="logout()" class="btn-logout">Sair</button>
            </div>
        </div>
    </header>
    
    <script>
        // Atualizar nome do usu√°rio logado
        const usuarioNome = sessionStorage.getItem('stic_usuario_nome');
        const usuarioNumero = sessionStorage.getItem('stic_usuario_numero');
        if (usuarioNome) {
            document.getElementById('userName').textContent = `üë§ ${usuarioNome}${usuarioNumero ? ' - ' + usuarioNumero : ''}`;
        }
    </script>

    <nav class="sidebar" id="sidebar">
        <ul>
            <li><a href="index.html" class="active">üìä Dashboard</a></li>
            <li><a href="pages/nova-os.html">‚ûï Nova OS</a></li>
            <li><a href="pages/controle-materiais.html">üì¶ Controle Materiais</a></li>
            <li><a href="pages/controle-emprestimos.html">üîÑ Empr√©stimos</a></li>
            <li><a href="pages/buscar-os.html">üîç Buscar OS</a></li>
            <li><a href="pages/os-recorrentes.html">üîÑ OS Recorrentes</a></li>
            <li><a href="pages/os-recorrentes.html">üîÑ OS Recorrentes</a></li>
            <li><a href="pages/relatorios.html">üìà Relat√≥rios</a></li>
            <li><a href="pages/relatorios-ia.html">ü§ñ Relat√≥rios IA</a></li>
            <li><a href="pages/horas-extras.html">‚è∞ Horas Extras</a></li>
            <li><a href="pages/auditoria.html">üîê Auditoria</a></li>
            <li><a href="pages/gerenciar-usuarios.html">üë• Gerenciar Recebedores</a></li>
        </ul>
    </nav>

    <!-- Overlay para fechar menu mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleMobileMenu()"></div>

    <main class="content">
        <div class="welcome-banner">
            <h2>Bem-vindo ao Sistema de Controle STIC</h2>
            <p>Gerencie ordens de servi√ßo, entrada e sa√≠da de materiais de forma organizada</p>
        </div>

        <section id="stats" class="stats-grid">
            <div class="stat-card stat-abertas">
                <div class="stat-icon">üìã</div>
                <div class="stat-info">
                    <h3>OS Abertas</h3>
                    <p class="stat-number" id="osAbertas">0</p>
                </div>
            </div>
            <div class="stat-card stat-manutencao">
                <div class="stat-icon">üîß</div>
                <div class="stat-info">
                    <h3>Em Manuten√ß√£o</h3>
                    <p class="stat-number" id="emManutencao">0</p>
                </div>
            </div>
            <div class="stat-card stat-enviado">
                <div class="stat-icon">üöö</div>
                <div class="stat-info">
                    <h3>Enviados BH</h3>
                    <p class="stat-number" id="enviadosBH">0</p>
                </div>
            </div>
            <div class="stat-card stat-finalizadas">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-info">
                    <h3>Finalizadas (M√™s)</h3>
                    <p class="stat-number" id="finalizadas">0</p>
                </div>
            </div>
        </section>

        <section class="charts-section">
            <div class="chart-card">
                <h3>Equipamentos por Tipo</h3>
                <canvas id="chartTipos"></canvas>
            </div>
            <div class="chart-card">
                <h3>Status das OS</h3>
                <canvas id="chartStatus"></canvas>
            </div>
        </section>

        <section id="recentes">
            <div class="section-header">
                <h2>√öltimas Ordens de Servi√ßo</h2>
                <button onclick="window.location='pages/nova-os.html'" class="btn-primary">
                    ‚ûï Nova OS
                </button>
            </div>
            <div id="listaOS" class="os-list">
                <div class="os-item">
                    <div class="os-numero">OS #001</div>
                    <div class="os-equipamento">
                        <strong>R√°dio Motorola DGP5550</strong>
                        <small>Patrim√¥nio: 123456 | S√©rie: SN123ABC</small>
                    </div>
                    <div class="os-solicitante">
                        <strong>Cb PM Silva</strong>
                        <small>7¬™ RPM</small>
                    </div>
                    <div class="os-data">19/01/2026</div>
                    <span class="status-badge status-aberta">Aberta</span>
                    <div class="os-actions">
                        <button class="btn-icon" title="Ver detalhes">üëÅÔ∏è</button>
                        <button class="btn-icon" title="Editar">‚úèÔ∏è</button>
                    </div>
                </div>
                <div class="os-item">
                    <div class="os-numero">OS #002</div>
                    <div class="os-equipamento">
                        <strong>Notebook Dell Latitude</strong>
                        <small>Patrim√¥nio: 789012 | S√©rie: DL456XYZ</small>
                    </div>
                    <div class="os-solicitante">
                        <strong>Sgt PM Santos</strong>
                        <small>STIC</small>
                    </div>
                    <div class="os-data">18/01/2026</div>
                    <span class="status-badge status-manutencao">Em Manuten√ß√£o</span>
                    <div class="os-actions">
                        <button class="btn-icon" title="Ver detalhes">üëÅÔ∏è</button>
                        <button class="btn-icon" title="Editar">‚úèÔ∏è</button>
                    </div>
                </div>
                <div class="os-item">
                    <div class="os-numero">OS #003</div>
                    <div class="os-equipamento">
                        <strong>HT Motorola EP450</strong>
                        <small>Patrim√¥nio: 345678 | S√©rie: EP789DEF</small>
                    </div>
                    <div class="os-solicitante">
                        <strong>Sd PM Oliveira</strong>
                        <small>1¬∫ Cia</small>
                    </div>
                    <div class="os-data">17/01/2026</div>
                    <span class="status-badge status-enviado-bh">Enviado BH</span>
                    <div class="os-actions">
                        <button class="btn-icon" title="Ver detalhes">üëÅÔ∏è</button>
                        <button class="btn-icon" title="Editar">‚úèÔ∏è</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
    <!-- Verifica√ß√£o de login -->
    <script>
        // Verificar se est√° logado
        if (!sessionStorage.getItem('stic_logado')) {
            window.location.href = 'login.html';
        }
        
        // Fun√ß√£o de logout
        function logout() {
            sessionStorage.removeItem('stic_logado');
            sessionStorage.removeItem('stic_usuario');
            window.location.href = 'login.html';
        }
    </script>
    
    <!-- üìä Chart.js para gr√°ficos do dashboard -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- üìß EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script>
        (function(){
            emailjs.init("LDlUqkqdk_ZNRLN22");
            console.log('‚úÖ EmailJS inicializado');
        })();
    </script>
    
    <script src="js/mobile-menu.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/auditoria.js"></script>
    <script src="js/google-drive-backup.js"></script>
    <script src="js/funcoes-globais.js"></script>
    
    <!-- üìß Sistema de Email Autom√°tico -->
    <script src="js/email-automatico.js"></script>
    
    <!-- üì± Sistema de Telegram Autom√°tico -->
    <script src="js/telegram-stic.js"></script>
    
    <script src="js/os-manager.js"></script>
    <script src="js/app.js"></script>
    <script src="js/os-recorrentes.js"></script>
</body>
</html>
